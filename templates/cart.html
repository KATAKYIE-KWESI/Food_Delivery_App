{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shopping Cart - JollyFoods</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{% static 'homepage.css' %}">
    <link rel="stylesheet" href="{% static 'cart.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- NAVBAR -->
<div class="navbar">
    <a href="{% url 'homepage' %}" class="logo">JollyFoods.</a>
    <ul class="navbar-menu">
        <li><a href="{% url 'homepage' %}">Home</a></li>
        <li><a href="{% url 'menu' %}">Menu</a></li>
        <li><a href="{% url 'contact' %}">Contact</a></li>
    </ul>
</div>

<!-- CART -->
<div class="cart-container">

{% if cart_items %}
<div class="cart-content">

    <!-- CART ITEMS -->
    <div class="cart-items-section">
        <h2>Your Items</h2>

        {% for item in cart_items %}
        <div class="cart-item">
            <img src="{% static 'assets/' %}{{ item.food_image }}" alt="{{ item.food_name }}">
            <div class="item-info">
                <h4>{{ item.food_name }}</h4>
                <p>${{ item.food_price }}</p>
            </div>
            <div class="item-qty">{{ item.quantity }}</div>
            <div class="item-total">${{ item.get_total_price }}</div>
        </div>
        {% endfor %}
    </div>

    <!-- SUMMARY -->
    <div class="cart-summary">
        <h2>Order Summary</h2>

        <div class="summary-row">
            <span>Subtotal</span>
            <span>${{ cart_total }}</span>
        </div>

        <div class="summary-row">
            <span>Delivery</span>
            <span>$5.00</span>
        </div>

        <div class="summary-row total">
            <strong>Total</strong>
            <strong>${{ cart_total|add:5 }}</strong>
        </div>

        <!-- DELIVERY LOCATION -->
        <div class="delivery-location-section">
            <div class="section-header">
                <div class="delivery-icon">üöö</div>
                <h3>Delivery Details <span class="required-badge">REQUIRED</span></h3>
            </div>

            <button id="loc-btn" class="quick-location-btn">
                üìç Share My Location
            </button>

            <div class="form-group">
                <label>Phone Number *</label>
                <input type="tel" id="phone" placeholder="24 123 4567">
            </div>

            <div class="form-group">
                <label>Nearby Landmark *</label>
                <input type="text" id="landmark" placeholder="Melcom, KFC, Shell...">
            </div>

            <div id="address-display" class="delivery-address-display"></div>
        </div>

        <!-- CHECKOUT -->
        <button
            id="checkoutBtn"
            class="checkout-btn disabled"
            data-url="{% url 'payment' %}"
            disabled
        >
            Add delivery details to checkout
        </button>
    </div>

</div>
{% else %}
<p>Your cart is empty</p>
{% endif %}

</div>

<!-- HIDDEN FIELDS -->
<input type="hidden" id="id_lat">
<input type="hidden" id="id_lon">

<script src="{% static 'scripts/cart.js' %}"></script>
<script src="{% static 'scripts/location.js' %}"></script>

</body>
</html>
